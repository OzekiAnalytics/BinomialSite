<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Wrestler Skill Binomial Test</title>
<style>
  body { font-family: sans-serif; max-width: 500px; margin: 2rem auto; }
  input, button { margin: 0.5rem 0; padding: 0.4rem; width: 100%; font-size: 1rem; }
  #result { margin-top: 1rem; font-weight: bold; }
</style>
</head>
<body>
  <h2>Wrestler Skill Binomial Test</h2>
  <label>Wins: <input id="wins" type="number" value="6"></label>
  <label>Total Matches: <input id="total" type="number" value="7"></label>
  <label>Expected Win Prob (H₀): <input id="pnull" type="number" step="0.01" value="0.5"></label>
  <button onclick="runTest()">Run Test</button>
  <div id="result"></div>

<script>
// factorial utility for combinations
function factorial(n){ return n<=1 ? 1 : n*factorial(n-1); }
function comb(n,k){ return factorial(n)/(factorial(k)*factorial(n-k)); }

// probability of exactly k successes
function binomCdf(k, n, p) {
  let sum = 0;
  for (let i = 0; i <= k; i++) sum += binomPmf(i, n, p);
  return sum;
}

function binomTestTwoSided(k, n, p) {
  const cdf = binomCdf(k, n, p);
  const upperTail = 1 - binomCdf(k - 1, n, p);
  const pval = Math.min(1, 2 * Math.min(cdf, upperTail));
  return pval;
}


function runTest(){
  const wins = parseInt(document.getElementById('wins').value);
  const total = parseInt(document.getElementById('total').value);
  const pnull = parseFloat(document.getElementById('pnull').value);

  const pval = binomTestTwoSided(wins, total, pnull);
  const msg = pval < 0.05 ? 
      "Reject H₀: There is evidence that Wrestler A might be stronger." :
      "Fail to reject H₀: result could be due to chance.";

  document.getElementById('result').innerHTML = 
      `P-value: ${pval.toFixed(4)}<br>${msg}`;
}
</script>
</body>
</html>
